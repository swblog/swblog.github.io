# 查找和替换

## 查找

`f`查找一行，移动光标到下一个所指定的字符上。例如，命令 fa 会把光标定位到同一行中的下一个出现的”a”字符上。

在一行中执行了字符的查找命令之后，通过输入分号来重复这个查找。

`/`命令移动光标到下一个出现的单词或短语上。当你输入`/`命令后，一个”/”字符会出现在屏幕底部。下一步，输入要查找的单词或短语后， 按下回车。光标就会移动到下一个包含所查找字符串的位置。通过`n`命令来重复先前的查找。向后查找使用`?`。

## 全局查找和替换

全局的查找和替换执行下面的命令。

```
:%s/Line/line/g
```

上面命令几个部分的含义如下。

- `:`	冒号字符运行一个 ex 命令。
- `%`	指定要操作的行数。% 是一个快捷方式，表示从第一行到最后一行。另外，操作范围也 可以用 1,5 来代替（因为我们的文件只有5行文本），或者用 1,$ 来代替，意思是 “ 从第一行到文件的最后一行。” 如果省略了文本行的范围，那么操作只对当前行生效。
- `s`	指定操作。在这种情况下是，替换（查找与替代）。
- `/Line/line`	查找类型与替代文本。
- `g`	这是“全局”的意思，意味着对文本行中所有匹配的字符串执行查找和替换操作。如果省略 g，则 只替换每个文本行中第一个匹配的字符串。

上面命令的尾部添加`c`，可以确认每一次替换。

```
:%s/line/Line/gc
```

执行上面命令以后，发现一个匹配之后，Vim会显示如下提示。

```
replace with Line (y/n/a/q/l/^E/^Y)?
```

上面几个确认字符的含义如下。

- y	执行替换操作
- n	跳过这个匹配的实例
- a	对这个及随后所有匹配的字符串执行替换操作。
- q or esc	退出替换操作。
- l	执行这次替换并退出。l 是 “last” 的简写。
- Ctrl-e, Ctrl-y	分别是向下滚动和向上滚动。用于查看建议替换的上下文。

